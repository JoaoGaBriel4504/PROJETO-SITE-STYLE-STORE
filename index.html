<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Style Store</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Header -->
    <header class="bg-info text-white py-2">
      <div
        class="container d-flex align-items-center justify-content-between flex-wrap"
      >
        <div class="d-flex align-items-center">
          <h2 class="fw-bold m-0" style="font-family: sans-serif">STYLE</h2>
          <small class="ms-1" style="font-style: italic">STORE</small>
        </div>

        <div class="flex-grow-1 mx-4" style="max-width: 600px">
          <div class="input-group rounded">
            <input
              type="text"
              class="form-control"
              placeholder="Encontre o que você precisa aqui"
            />
            <span class="input-group-text bg-white"
              ><i class="bi bi-search"></i
            ></span>
          </div>
        </div>

        <div class="d-flex align-items-center gap-4">
          <div class="d-flex align-items-center text-white">
            <i class="bi bi-person me-1"></i>
            <a
              href="./login.html"
              class="text-white text-decoration-none fw-semibold"
              >Cadastre-se ou faça seu login</a
            >
          </div>
          <div class="d-flex align-items-center text-white">
            <i class="bi bi-telephone me-1"></i>
            <a
              href="./faleconosco.html"
              class="text-white text-decoration-none fw-semibold"
              >Fale Conosco<br /><small>Clique aqui</small></a
            >
          </div>
          <div
            class="position-relative"
            data-bs-toggle="modal"
            data-bs-target="#cartModal"
            style="cursor: pointer"
          >
            <i class="bi bi-cart3 fs-4 text-white"></i>
            <span
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-black"
              id="cart-count"
              style="font-size: 0.7rem"
              >0</span
            >
          </div>
        </div>
      </div>
    </header>

    <!-- Menu -->
    <div class="navbar">
      <div class="dropdown">
        <button class="dropdown-button" onclick="toggleDropdown()">
          CATEGORIAS &#9662;
        </button>
        <div class="dropdown-content" id="dropdownMenu">
          <a href="./categorias/eletronicos/index.html">Eletrônicos</a>
          <a href="./categorias/esportes/index.html">Esportes</a>
        </div>
      </div>
      <div class="nav-links">
        <a href="./categorias/lancamentos/index.html">LANÇAMENTOS</a>
        <a href="./categorias/moda/index.html">MODA</a>
        <a href="./categorias/acessorios/index.html">ACESSÓRIOS</a>
        <a href="./categorias/utensilios/index.html">UTENSÍLIOS</a>
      </div>
    </div>

    <div style="background-color: #0accff">
      <img
        src="./img/BARRA2.png"
        alt="Informações adicionais do rodapé"
        style="display: block; width: 99%; height: auto; margin-bottom: 0"
      />
    </div>

    <!-- Produtos -->
    <div class="container my-5">
      <div class="row g-4">
        <div class="col-md-4">
          <div class="card h-100">
            <img
              src="./img/p64.webp"
              class="card-img-top"
              alt="Tênis Tn Plus 3"
            />
            <div class="card-body">
              <h5 class="card-title">Tênis Tn Plus 3</h5>
              <p class="card-text">Performance e atitude no mesmo tênis.</p>
              <p class="text-success fw-bold">R$ 599,90</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Tênis Tn Plus 3"
                data-price="599,90"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <img
              src="./img/p23.jpg"
              class="card-img-top"
              alt="Relógio Unisex"
            />
            <div class="card-body">
              <h5 class="card-title">Relógio Unisex</h5>
              <p class="card-text">
                Um toque de sofisticação que combina com qualquer estilo
              </p>
              <p class="text-success fw-bold">R$ 89,90</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Relógio Unisex"
                data-price="89,90"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <img
              src="./img/k1.jpg"
              class="card-img-top"
              alt="Chuteira Society Nike Zoom"
            />
            <div class="card-body">
              <h5 class="card-title">Chuteira Society Nike Zoom</h5>
              <p class="card-text">
                Velocidade, tração e leveza para dominar os gramados society.
              </p>
              <p class="text-success fw-bold">R$ 617,49</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Chuteira Society Nike Zoom"
                data-price="617,49"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <img
              src="./img/pa13.png"
              class="card-img-top"
              alt="Lattafa Asad Edp"
            />
            <div class="card-body">
              <h5 class="card-title">Lattafa Asad Edp</h5>
              <p class="card-text">Estilo marcante e simbólico.</p>
              <p class="text-success fw-bold">R$ 299,90</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Lattafa Asad Edp"
                data-price="299,90"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <img
              src="./img/j10.webp"
              class="card-img-top"
              alt="Controle PS5 Skin - Coringa Joker"
            />
            <div class="card-body">
              <h5 class="card-title">Controle PS5 Skin - Coringa Joker</h5>
              <p class="card-text">
                Estilo único com personalização inspirada no universo do
                Coringa.
              </p>
              <p class="text-success fw-bold">R$ 329,90</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Controle PS5 Skin - Coringa Joker"
                data-price="329,90"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <img src="./img/p3.jpg" class="card-img-top" alt="Perfume Dream" />
            <div class="card-body">
              <h5 class="card-title">Perfume Dream</h5>
              <p class="card-text">Fragrância leve e encantadora.</p>
              <p class="text-success fw-bold">R$ 101,50</p>
              <button
                class="btn btn-primary w-100 add-to-cart"
                data-name="Perfume Dream"
                data-price="101.50"
              >
                Adicionar ao Carrinho
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal do Carrinho -->
    <div
      class="modal fade"
      id="cartModal"
      tabindex="-1"
      aria-labelledby="cartModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cartModalLabel">Carrinho de Compras</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" id="cartItems">
            <p>Seu carrinho está vazio.</p>
          </div>
          <div class="modal-footer">
            <strong>Total: <span id="cartTotal">R$ 0,00</span></strong>
            <button class="btn btn-success">Finalizar Compra</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Rodapé -->
    <div style="background-color: #eeeeee">
      <img
        src="./img/BARRA.png"
        alt="Rodapé"
        style="display: block; width: 99%; height: auto; margin-bottom: 0"
      />
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      function toggleDropdown() {
        const dropdown = document.getElementById("dropdownMenu");
        dropdown.style.display =
          dropdown.style.display === "block" ? "none" : "block";
      }

      window.onclick = function (event) {
        if (!event.target.matches(".dropdown-button")) {
          const dropdowns = document.getElementsByClassName("dropdown-content");
          for (let i = 0; i < dropdowns.length; i++) {
            dropdowns[i].style.display = "none";
          }
        }
      };

      // Carrinho
      const cart = [];
      const cartCount = document.getElementById("cart-count");
      const cartItems = document.getElementById("cartItems");
      const cartTotal = document.getElementById("cartTotal");

      function formatCurrency(value) {
        return value.toLocaleString("pt-BR", {
          style: "currency",
          currency: "BRL",
        });
      }

      function updateCart() {
        cartItems.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
          cartItems.innerHTML = "<p>Seu carrinho está vazio.</p>";
        } else {
          const list = document.createElement("ul");
          list.classList.add("list-group");

          cart.forEach((item, index) => {
            const li = document.createElement("li");
            li.classList.add(
              "list-group-item",
              "d-flex",
              "justify-content-between",
              "align-items-center"
            );
            li.innerHTML = `
              ${item.name} - ${formatCurrency(item.price)}
              <button class="btn btn-sm btn-danger" onclick="removeFromCart(${index})">Remover</button>
            `;
            list.appendChild(li);
            total += item.price;
          });

          cartItems.appendChild(list);
        }

        cartCount.textContent = cart.length;
        cartTotal.textContent = formatCurrency(total);
      }

      function removeFromCart(index) {
        cart.splice(index, 1);
        updateCart();
      }

      document.querySelectorAll(".add-to-cart").forEach((button) => {
        button.addEventListener("click", () => {
          const name = button.dataset.name;
          const price = parseFloat(button.dataset.price);
          cart.push({ name, price });
          updateCart();
        });
      });

      // Finalizar Compra
      document.querySelector(".btn-success").addEventListener("click", () => {
        if (cart.length === 0) {
          alert("Seu carrinho está vazio.");
          return;
        }

        // Simula finalização
        alert("Compra finalizada com sucesso!");

        // Limpa o carrinho
        cart.length = 0;
        updateCart();

        // Fecha o modal do carrinho
        const cartModal = bootstrap.Modal.getInstance(
          document.getElementById("cartModal")
        );
        cartModal.hide();
      });
    </script>
  </body>
</html>
